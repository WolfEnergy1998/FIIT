---
title: "Week-1"
output: html_document
date: "2024-02-18"
---

# Task n.1.

Download `players_22.csv` data file from shared folder and load it into R. We will refer to this dataset as `data` or `players` thorough this and future exercises.

```{r}
getwd()
list.files()
```

```{r}
library(tidyverse)
library(lobstr)
data <- read_csv("Files/players_22.csv", col_names = TRUE, num_threads = 4) # Read data into R
data[1,]
```

# Task n.2.

As with any unknown dataset, your first task is to understand its structure. How many columns (attributes/variables) and how many rows (observations) are there? Are data labeled? Are data homogeneous or heterogeneous? Are there sufficient number or records and attributes to do machine learning?

Apply each of the following functions to `data` and describe the result.

```{r}
View(data)              # View table
class(data)             # View class info of table
typeof(data)            # View type of table
dim(data)               # View dimensions of table
lobstr::obj_size(data)  # View memory size of table
```

# Task n.3.

Write a R script that count the \# of different column types for you. Aims for code that returns something a table like this.

```{r}
table(sapply(data, class))

table(unlist(mat(data,class)) #Model solution
```

# Task n.4.

As with many other datasets, the `players_22` dataset is incomplete. Find how many rows have complete set of records. Describe the problem.

```{r}
sum(is.na(data))

table(complete.cases(data))
```

# Task n.5.

Write a R program that counts `NA` in a given column. For example, the `overall` column does not have a single `NA` value, but `nation_position` does have a lot of them.

```{r}
apply(X = is.na(data), MARGIN = 2, FUN = sum)

#model solution
table(is.na(data$nation_position))
```

# Task n.6.

Explain why statement `data[1:120]` returns an error? How does it differ from the similar statement `data[1:120, ]`?

Because data-frame data has more than 1 columns, in [] brackets, of this type of field, we must specific of rows and columns. In first case program cant decide if we specifi range of row or columns.

# Task n.7.

Fix the lines of code containing errors.

```{r}
data[data$player_positions == "GK", ]
data[0:4, ]
data[data$overall <= 50,]
data[data$overall <= 50 | data$overall > 90, ]
```

# Task n.8.

Simplifying and preserving subsetting operations are performed with single `[` and double `[[` square bracket operators, but choosing the right operator is often tricky. Use the correct operator, or a combination of operators to:

-   Retrieve the list of names of football players as a character vector. To list the first few names use `head()`.

    ```{r}
    head(data[[3]],5)
    ```

-   Retrieve a character vector containing only the name *L.Messi*, which the value of the first row and the third column.

    ```{r}
    data[1,3]
    ```

-   Restrict `data` to a data frame containing a single column with player’s wages. There are several ways to do this and you should try at least two. Limit the number of records to 5 with `head()`.

    ```{r}
    head(data[[9]],5)
    head(data$wage_eur,5)
    head(data[["wage_eur"]],5)
    ```

# Task n.9.

Normalize the player’s rank — a score about how well a player is currently playing.

To do that, you have to subtract the player’s current rank (column name `overall`) from his potential rank (column named `potential`). Store the resulting calculations in a new column. Name this column as `rank_normalized`.

> Normalized values are called the *relative values* and are often used instead of the *original values* because they convey the message better.

R puts the new column always at the end of a data frame. Rearrange the data, so you can print only relevant columns to that our computations: `short_name`, `overall`, potential and `rank_normalized`.

Print first 5 lines. Structure your code as follows:

```{r}
# Step 1: Normalize
data$rank_normalized <- data$potential - data$overall
data_slice <- data[,c("short_name", "overall", "rank_normalized")]
# Step 3: Print the first five lines
head(data_slice,5)
```

# Task n.10.

Log-transform player’s wages. Instead of creating a new column, replace the original values with the logged ones.

```{r}
log(320000)
data$wage_eur = log(data$wage_eur)
```

```{r}
head(data$wage_eur,5)
```
